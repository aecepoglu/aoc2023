Numâ†(âŠ£+10Ã—âŠ¢)Â´âˆ˜âŒ½-âŸœ'0'
MSplitâ†((Â¬-ËœâŠ¢Ã—Â·+`Â»âŠ¸>)âˆ˜(Â¬âˆ˜âˆŠËœ)âŠ”âŠ¢)

Parseâ†{numwinğ•Šline: numwin(â†‘â‹ˆâ†“) Â· NumÂ¨ " |"MSplit (âˆ¨`Â·Â»âˆ˜Â»':'âŠ¸=)âŠ¸/line}
Winâ†+Â´ 1âŠ¸âŠ‘âˆŠ0âŠ¸âŠ‘ # number of winning cards


# count by hand that there are 10 winning cards in each line
wonâ†(Win 10âŠ¸Parse)Â¨ â€¢FLines "4.txt"

# part 1
+Â´2â‹†1-Ëœ 0âŠ¸â‰ âŠ¸/ won

# part 2
Earnâ†{dğ•Šiâ€¿s: (iâŠ¸<âˆ§â‰¤âŸœ(i+s)) d} # bitmask over `d` earned by `s` wins at position `i`
idxâ†â†•â‰  won
+Â´ (1Â¨won){iâ€¿cğ•Šac: ac+(iâŠ‘ac)Ã—idx Earn ğ•¨}Â´âŒ½ (0âŠ¸â‰ )âŠ¸(/âˆ˜âŠ£â‹ˆÂ¨/) won
